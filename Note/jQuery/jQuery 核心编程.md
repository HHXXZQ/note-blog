# jQuery 核心编程

> 多 快 好 省 的 编写`JavaScript`代码

## jQuery 对象

就是伪数组。

`jq`对象具有0到length-1的属性，并具有length属性。

## jQuery 入口函数

`jQuery`入口函数的固定写法为：

```js
$(document).ready(function() {
  // 代码块...
})
```

原生JS入口函数写法：

```js
window.onload = function() {
  // 代码块...
}
```



### 原生JS和jQuery入口函数的加载模式区别

1. 原声JS会等到DOM元素和图片等文档元素（同一入口函数）加载完毕之后再执行。而jQuery会等到DOM加载完毕，但不会等到图片等文档元素加载完毕就会执行。
2. 原生JS编写多个入口函数会被最近的覆盖。而jQuery编写多个入口函数则不会覆盖。

### jQuery入口函数的其他写法

`jQuery`除了上节的写法外还有：

写法二

```js
jQuery(document).ready(function() {
  // 代码块...
})
```

**写法三（推荐该种写法）**

```js

$(function() {
  // 代码块...
})
```

写法四

```js
jQuery(function() {
  // 代码块...
})
```

> 写法一和写法二类似，写法三和写法四类。只需将美元符号`$`替换为标识`jQuery`即可。

## jQuery 核心函数

### `$()`

jQuery的核心函数

可接受参数：

1. 接收一个函数，作为入口函数；
2. 接受一个字符串选择器， 返回`jq`对象。
3. 接收一个字符串代码片段，返回根据代码片段包装成的`jq`对象；
4. 接收一个DOM元素，返回包装该元素的`jq`对象。

## jQuery 静态方法

### `each()`

1. 利用`each()`静态方法遍历数组；

   1. 第一个参数是传入数组；

   2. 第二个参数是函数，对数组中每个元素的处理，且函数中：

      - 第一个参数：当前遍历到的索引；

      - 第二个参数：当前遍历到的元素。

      ```js
      $.each(arr, function(index, value) {
      		// 对每个元素进行处理...
                            }))
      ```

2. 遍历伪数组，与`1`的写法一致。

3. 默认返回被遍历的对象，且不支持在回调函数中通过`return`对遍历的数组进行处理。

### `map()`

参数：

1. 第一个参数：要遍历到的数组

2. 第二参数：每遍历一个元素之后执行的回调函数。

   回调函数的参数：

   - 第一个参数：遍历到的元素；

   - 第二个参数：遍历到的索引。

   ```js
   $.map(arr, function(value, index) {
      // 对每个元素进行处理...
   })
   ```

3. 默认返回空数组。可以在回调函数中通过`return`对遍历的数组进行处理，然后生成一个新的数组。

### 其他静态方法

1. `trim(字符串)`

   去除字符串两端的空格，返回去除空格之后的字符串。

2. `isWindow(obj)`

   判断传入的对象是否是`window`对象。

3. `isArray(obj)`

   只有传入的为真数组才会返回`true`。

4. `isFunction(obj)`

   只有传入的为函数对象才会返回`true`。

   **注意：**`jQuery`框架本质上是一个函数。

5. `holdReady(boolean)`

   为`true`时暂停`ready`入口函数的执行，为`false`时恢复执行。

## 选择器

内容选择器

1. **`:empty`**找到既没有文本内容也没有子元素的元素。
2. **`:parent`** 找到有子元素或有文本内容的元素。
3. **` :contains(text)`** 找到包含有指定文本内容`text`的元素
4. **`:has(selector)`** 找到元素包含有指定选择器的元素。

## jQuery 的属性

### 操作属性节点的两个方法

1. **`attr(name|pro|key, val|fn)`**

   **`jQ对象方法`**获取或设置属性节点的值

   1. 只传递第一个参数时，获取属性节点的值。<u>且无论找到多少个参数，都只会返回第一个元素指定的属性节点的值</u>
   2. 传递第二个参数时，将设置属性节点的值。<u>找到多少个元素就会设置多少个元素的属性节点，而且如果该属性不存在，则会新增。</u>

2. **`removeAttr(name)`**

   删除属性节点，<u>会删除所有找到的属性节点</u>。

### 操作属性的两个方法

1. `prop()`

   特点和`attr`方法一致，不一样的是`prop`方法用于获取和设置属性。**注意：`prop`还可以操作属性节点，所以推荐在具有true和false两个属性的属性节点如checked、selected或者disabled使用`prop()`，其他的使用`attr()`**

2. `rempveProp()`

   删除属性，<u>会删除所有找到的属性</u>。

### jQ 操作类

1. `addClass(类名)`

   **添加类**，如果类有多个，类名之间用空格隔开即可。

2. `removeClass(类名)`

   **删除类**，如果类有多个，多个类名之间用空格隔开。

3. `toggleClass(类名)`

   **切换类**

   有就删除，没有就添加

### jQ 操作文本内容

1. `html(代码片段)`

   和原生JS中的innerHTML相似。

2. `text(字符串)`

   和原生JS的innerText相似。

3. `val(内容)`

   类似value属性

### 操作对象的CSS

**`css(CSS样式字符串)`**

1. 可链式操作，如果大于三步时建议分开
2. 批量设置（类似直接的样式代码，推荐写法）
3. 只传入要获取的样式名字符串以获取样式值。

## 事件相关操作

### 绑定事件的两种方式

1. **`eventName(回调函数)`**

   只实现了部分事件。

2. **`on(事件名字符串, 回调函数)`**

以上两种方式对同一个元素绑定多个事件，后绑定事件不会覆盖先前绑定的事件。

事件移除

### `off()`

1. 不传递参数，移除所有事件
2. 传递一个参数，移除指定类型的事件
3. 传递两个参数，移除指定类型的指定时间。

### 事件冒泡和默认行为

1. 在子元素事件回调函数中使用`return false;`和`event.stopPropagation()`阻止事件冒泡。

2. 在元素事件回调函数中使用`return false;`和`event.preventDefault()`阻止事件默认行为。

### 事件自动触发

1. **`trigger()`**

   自动触发事件，会触发事件冒泡；也会触发事件默认行为。

2. **`triggerHandler()`**

   自动触发事件，则不会触发事件冒泡；也不会触发事件的默认行为。

### 自定义事件

需满足的两个条件

1. 事件必须通过`on`绑定；
2. 事件必须通过`trigger`进行触发。

### 事件委托

**`delegate(元素节点，事件名，回调函数)`**

- 将元素节点应调用的回调函数委托给调用`delegate`方法的节点元素进行监听。

## ！！！jQuery NOTE！！！

1. 释放`$`使用权

   `jQuery.noConflict();`

2. 自定义访问符号

   `var yourSymbol = jQuery.noConflict();`